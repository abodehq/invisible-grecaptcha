<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Invisible Grecaptcha</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css">
    <script src="https://cdn.jsdelivr.net/npm/invisible-grecaptcha/dist/index.umd.js"></script>
</head>
<body>
    <div class="section">
        <div class="container">
            <h1 class="title">Invisible Grecaptcha</h1>
            <p>Open your console to see the results.</p>
            <button class="button is-primary" id="execute">Execute</button>
            <button class="button is-warning" id="reset">Reset</button>
            <button class="button is-info" id="get-response">Get Response</button>
        </div>
    </div>
    <script>
        ;(async function() {
            const executeElement = document.getElementById('execute')
            const resetElement = document.getElementById('reset')
            const getResponseElement = document.getElementById('get-response')

            function verifyCallback(token) {
                console.log(token)
            }

            const {
                createInvisibleGrecaptcha,
                execute,
                reset,
                getResponse
            } = window.invisibleGrecaptcha

            const grecaptcha = await createInvisibleGrecaptcha({
                sitekey: '6LdLnkMUAAAAAA0e7x8KEw9n7W8MMGpwCMszFBwm',
                callback: verifyCallback,
                locale: 'pt-BR'
            })

            executeElement.addEventListener('click', () => {
                execute(grecaptcha)
            })

            resetElement.addEventListener('click', () => {
                reset(grecaptcha)
            })

            getResponseElement.addEventListener('click', () => {
                const token = getResponse(grecaptcha)
                console.log({token})
            })
        })()
    </script>
</body>
</html>
